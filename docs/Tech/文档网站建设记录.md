---
sidebar_position: 3
sidebar_label: 文档网站建设记录
sidebar_class_name: green
---

## 需求

在原文档网站（基于Read the Docs）的基础上，梳理出新方案的一些功能需求。

- 支持自动构建：打通数据源到SSG以及部署的流程，源文档发布为网页/PDF/PPT等需求。
- 支持多版本：基于GitHub的分支管理，多版本部署。
- 支持多语言：页面切换，最小化diff翻译。
- 支持实时分享：链接分享，离线分享，单篇下载替代当前手动导出，唯一可溯源，域名需要重定向到官网子域名。
- 支持主题定制：默认样式，定义样式，实时预览。

## 选型

调研主流的文档网站方案后，出于以下考虑选择了Docusaurus：

- 基于MIT License开源，商用无限制，包括商业用途和代码修改。
- 活跃度，背靠Meta React，拥有企业级的稳定性。
- 专注于成为撰写和发布内容的最佳工具，具有开箱即用的文档相关功能。例如：
  - 自带开发服务器方便调试
  - 原生支持多版本管理
  - 完善支持国际化
  - 支持高自由度主题定制
  - 拥有丰富的插件生态、可深度定制交互组件（如在线IDE嵌入）等

然后基于Docusaurus梳理基础的发布流程：

1. 源文档开发和评审在飞书文档完成。
2. 浏览器插件将源文档下载为本地Markdown文件，用过滤工具得到对外、对外等各个版本。
3. 拉取Docusaurus文档项目源文件Source repo，添加待发布版本的Markdown文件，实时预览检查所有文档显示是否正常。
4. 构建静态网站，并部署到deployment repo。如果后面不使用GitHub托管，也可以自建服务器。
5. 将Markdown文件归档到source repo。

## 任务list

### Phase 1

必须的，基本是上线文档网站的MVP部分：

1. 跑通个人账号部署。
2. 跑通侧边栏排序。
3. 跑通多版本部署。
4. 跑通组织账号部署。
5. 使用最新版本的源文档适配MDX语法，解决语法兼容性问题。
6. 设计文档网站HomePage的内容。
7. 解决GitHub多账户切换导致的部署失败问题。
8. 跑通多实例部署，用独立Page展示多产品线的文档。
9. 梳理图片等静态资源的管理方式，基于发布流程避免潜在的坑点。
10. 添加文档搜索功能。
11. 添加PDF导出功能。
12. 上线文档网站，发布最新版本文档。
13. 域名重定向到官网子域名。

### Phase 2

比较重要的，可以让文档网站趋于完整：

1. 解决Phase 1的遗留问题。
2. 历史版本补全。如有需求，将更早的文档版本迁移过来，一起做多版本的文档管理。
3. 内容类型补全。 添加下其他产品线的线上版本，可以开设技术博客同步技术动态，增加开源社区相关内容，和官网相辅相成合理分散企业、产品、支持等不同维度的内容。
4. 文档工具补全。对整个流程中的工具链查缺补漏，工程提效。
5. 定制化。基于企业VI定制首页、样式和更多功能，需要设计、研发等资源支持。
6. 多语言。如有需求，上线英文版文档，多语言管理。多产品×多版本×多语言，复杂度飙升。

### Phase 3

相对发散的，是进一步提升成熟度的切入点：

1. 系统熟悉背后的React框架、TypeScript语言、MDX语法等前后端技术，了解其能力和边界。
2. 如果体量大到一定程度，如何进化为更大型的文档生产基础设施。
3. 流量分析、全球加速、留言板、关系图、AI问答等提升阅读体验的功能。

## 执行

目前已完成Phase 1阶段的任务，由于人力和工时有限，Phase 2以及后续按实际需要推进。
