---
sidebar_position: 2
sidebar_label: 文档网站方案调研
sidebar_class_name: green
---

## 背景

原先采购的Read the Docs到期，并且一年的时间内基本只使用了基础的构建发布功能。

经评估认为没有必要继续采购，完全可以基于开源方案自建文档站点，于是调研了下主流的静态站点生成器（简称SSG）。

开篇文档记录和分享一下，目前已经完成新文档站点的上线，过程中的规划思路和落地注意点，后续再单独开一篇文档分享。

## 了解技术栈

- [JAMStack](https://jamstackthemes.dev/)：JavaScript、APIs和Markup的首字母组合，本质上是一种胖前端，通过调用各种API来实现更多的功能，其实也是一种前后端的模式，只不过离得比较开，甚至前后端来自多个不同的厂商。通俗来说，JAMStack就是使用SSG技术，并且不依赖Web服务的前端技术栈。
  - 特点：
    - 全站托管于CDN上
    - 原子化发布（每次发布都是一次全量、原子性的发布）
    - 灵活的文件缓存策略
    - 基于Git的全自动构建、部署流程
  - 技术：
    - JavaScript：网页渲染工具，JAMStack并没有限制使用何种框架或是库。
    - APIs：一系列服务端行为的抽象，主要通过HTTPS与JavaScript交互，可以是第三方提供的服务，也可以是自己搭建的function。
    - Markup：网站是托管在CDN上的静态资源，Markup就是生成静态资源的源文件。刚提出Markup概念的时候，大家都看好Markdown作为Markup语言，但是这些年更常用的是Vue或是JSX文件。
  - 模块：
    - SSG：SSG用来预渲染整个网站。整个网站在部署前，会被SSG构建和优化为一系列的静态页面和静态资源，这样整个网站可以被托管在CDN上，加载速度得到最大程度地优化，安全性也得到保障。常见的SSG有Gatsby、Hugo、Jekyll、Eleventy、NextJS等。
    - Headless CMS：Headless CMS用来管理动态内容。如果想要网站承载动态内容，那么可以接入各种Headless CMS，这些CMS系统会对外提供API，SSG可以调用这些API拉取数据，将动态数据渲染成为静态页面。常见的Headless CMS有Ghost、Strapi、Netlify-CMS、TinaCMS、Contentful、Sanity、DatoCMS等。
    - HTTP API：HTTP API用来增强网站的功能。在登录注册、评论框等需要后端支持的能力上，JAMStack网站通常会使用微服务提供的HTTP API，或者一些第三方的BaaS（后端即服务）能力。
- Web前端：客户端视觉，偏向于浏览器上显示的内容。三剑客HTML、CSS、JavaScript/TypeScript，知名前端框架有Vue.js（尤雨溪）、React.js（Facebook）、AngularJS（Google）、Stencil.js、Glimmer.js、Ember.js、jQuery、Sass等。TS是真正的JS。为什么这么说呢？JavaScript这个名字和Java没有半点关系，Java里的接口、继承、强类型，它都没有。而TS是JS的超集，正是补全了这些缺失的部分，强调的是**Type**Script。有了强类型，就有了更好的IDE支持，包括语法提示和编译时错误信息。有了接口和继承，代码就更易读易维护。这些都是大型复杂前端工程急需的特性。
- Web后端：服务端算法，偏向于服务器、云、第三方接口等。常用开发平台MEAN、LAMP、.NET等，每个开发平台都包括一种编程语言，例如Python、JavaScript、Go、Ruby、PHP、Node.js、C#、C++、Java，知名后端框架有Spring、Django、Express.js、Rails、Laravel等。

## 梳理选择思路

- 集成和部署：考虑是否易于集成到现有工作流程和部署流程。
- 语言和技术栈：考虑现有技能和团队技术栈。
  - [Python、Ruby、Go语言哪个更值得学习？](https://www.zhihu.com/question/21480874/answer/1314620715)
- 社区支持：考虑是否有活跃的社区和丰富的资源工具。
- 主题和插件：考虑是否便于扩展功能和定制外观。
- 其他对比维度：
  - [A Feature Breakdown Comparison: Jekyll, Docusaurus, Sphinx, and Hugo](https://techwtoolkit.com/2023/06/06/a-feature-breakdown-comparison-jekyll-docusaurus-sphinx-and-hugo/)

## SSG待选list

| **SSG名称**            | **亮点**                                                     | **Fork/Star** | **官网/开源地址**                                            | **使用方法**                                                 |
| ---------------------- | ------------------------------------------------------------ | ------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| Sphinx                 | - 基于Python<br/>- 支持reStructuredText和Markdown<br/>- 扩展丰富、可定制，拥有庞大的社区支持 | -             | - https://www.sphinx-doc.org/                                | - 和Read the Docs捆绑：留观                                  |
| **Docusaurus**         | <br/>- Facebook开发，基于React<br/>- Docusaurus网站本身就是一个React应用。希望借由现代化JavaScript生态系统工具，在文档站点性能、资源构建系统，优化和易部署性等领域制定新标准。<br/>- 快速搭建、部署和维护文档网站，开发文档、技术文档、产品文档等<br/>- 默认文本格式为Markdown<br/>- 内置搜索、版本控制、多语言翻译支持，方便文档维护和更新<br/>- 网站具有响应式布局，让文档在不同设备上自适应显示，允许自定义主题、布局、字体等<br/>- 国内不少公司使用，例如声网 | 8.8k/58.3k    | - https://docusaurus.io/<br/>- https://github.com/facebook/docusaurus | - [為什麼我選用 Docusaurus?](https://ouch1978.github.io/docs/docusaurus/intro/why-docusaurus)<br/>- [官方SSG对比](https://docusaurus.io/zh-CN/docs/next#comparison-with-other-tools)<br/>- 专为文档设计、完全免费 |
| **VuePress/VitePress** | <br/>- 初衷是为了支持Vue.js及其子项目的文档需求，但已经被大量用于构建文档、博客和其他静态网站<br/>- 以Markdown为中心，专为技术文档设计<br/>- VuePress，Vue2的官方文档构建工具，由Vue驱动的静态网站生成器，基于Webpack构建，支持多语言、多版本、搜索等功能。适合创建文档网站。<br/>- VitePress，Vue3的官方文档构建器，由Vite和Vue驱动的静态站点生成器，基于Vite和Vue构建，在灵活性和可配置性上作出了一些让步，更轻更快但插件生态简单。适合创建小型文档网站或者单独文档页面。 | 4.8k/22.7k    | - https://vuepress.vuejs.org/zh/<br/>- https://github.com/vuejs/vuepress | - [利用VitePress部署静态网站](https://www.cnblogs.com/itkkk/p/18184599)<br/>- [我的自建博客之旅03之vuepress和Vitepress](https://juejin.cn/post/7347957960884437033)<br/>- [vitepress这或许是开源系统中，最好用的开源文档工具了吧](https://cloud.tencent.com/developer/article/2439946)<br/>- [VitePress + GitHub Pages 免费部署所有项目静态网站](https://juejin.cn/post/7157961507106471973)<br/>- [遐思笔记——旧貌换新颜](https://alephpi.github.io/article/遐思笔记——旧貌换新颜)<br/>- [VuePress升级成VitePress](https://juejin.cn/post/7021062842790969381)<br/>- [VuePress和VitePress的区别](https://blog.csdn.net/qq_29669259/article/details/129712443)<br/>- 专为文档设计 |
| **MkDocs**             | <br/>- 基于Python<br/>- 专为项目文档设计，偏向文档生成<br/>- 不支持单页应用，也没有React等框架支持默认<br/>- 文本格式为Markdown<br/>- 配置文件格式为YAML<br/>- 可以轻松集成到各种CI/CD工作流程<br/>- 提供开发服务器，支持实时预览<br/>- 用户不是特别多，只有十几个主题，Material for MkDocs最经典 | 2.4k/19.9k    | - http://www.mkdocs.org/<br/>- https://github.com/mkdocs/mkdocs | - [MkDocs快速上手指南](https://pwa.sspai.com/prime/story/mkdocs-primer)<br/>- [使用MkDocs和Material](https://zhuanlan.zhihu.com/p/672743170)<br/>- [Mkdocs简介及实践](https://cloud.tencent.com/developer/article/2403351)<br/>- [MkDocs+Material 国内搭建参考手册](https://robinyqc.cn/blogs/blogrepo/MkDocs 国内搭建参考手册)<br/>- [Material for MkDocs](https://wdk-docs.github.io/mkdocs-material-docs/setup/changing-the-logo-and-icons/)<br/>- 不能搞炫酷主页：留观 |
| **Jekyll**             | - 基于Ruby，模板语言为Liquid<br/>- 非常适合博客和项目文档<br/>- 默认文本格式为Markdown<br/>- GitHub Pages的默认生成器，容易与GitHub集成，提供了四百多种主题和两百多个插件满足定制需求<br/>- 静态生成 HTML，再通过 `<``script ``/>` 标签实现交互 | 10k/49.6k     | - https://jekyllrb.com/https://github.com/jekyll/jekyll      | - [Jekyll制作文档并发布到GitHub](https://cloud.tencent.com/developer/article/1459089)[官方快速入门](https://www.jekyll.com.cn/docs/)[Jekyll + GitHub Pages](https://blog.csdn.net/zzy979481894/article/details/132678717)[极简线上搭建个人网站](https://zhuanlan.zhihu.com/p/51240503)[Jekyll使用教程笔记1](https://juejin.cn/post/6844903623567081486)[Jekyll使用教程笔记2](https://juejin.cn/post/6844903629246169096) |
| Gatsby                 | - 基于React和[GraphQL](https://juejin.cn/post/6844903475420069902)<br/>- 适合构建许多类型的网站，其中Docz是用于搭建文档网站的主题<br/>- 大多数静态网站其实并不需要GraphQL所提供的灵活性<br/>- 从Contentful/Drupal/WordPress等CMS、Documentation/Posts等Markdown、API/Databases/YAML/JSON/CSV等Data来源加载数据<br/>- 在构建过程中从多个GraphQL API取得数据，然后创建出一个全静态的无后端的React app | 10.3k/55.7k   | - https://www.gatsbyjs.org/https://github.com/gatsbyjs/gatsby | - [Gatsby入门指南](https://juejin.cn/post/6844903999024398343)自己实现：留观 |
| Hugo                   | - 基于Go<br/>- 构建速度快，支持Markdown和reStructuredText，具有丰富的主题和插件生态<br/>- 可以轻松处理大型项目，生成SEO友好的URL和网站结构 | 7.7k/78k      | - https://gohugo.io/<br/>- https://github.com/gohugoio/hugo  | - [Hugo入门教程](https://juejin.cn/post/7114127835614150692)<br/>- https://gohugo.io/getting-started/quick-start/<br/>- 大型项目：留观 |
| Rspress                | - 用于创建优雅文档和静态网站，生成易于部署的静态HTML文件<br/>- 基于Rspack的快速静态站点生成器，一个基于Rust的捆绑器<br/>- 支持通过MDX（带有React组件的 Markdown） 写作，集成了文本搜索、多语言支持和插件扩展的特性<br/>- Rspress建立不久，得益于现代基础设施，能够更快地实现站点构建；而Docusaurus则在成熟、全面的功能设置、灵活性和强大的社区方面有优势 | -             | -                                                            | - 相对稚嫩：留观                                             |
| Next.js                | - 一款React混合框架，可以构建出色的文档网站，但它并不着重于文档功能本身，而且需要手动实现Docusaurus所自带的功能<br/>- Nextra是一款基于Next.js的静态站点生成器，功能比Docusaurus匮乏 | -             | -                                                            | - 自己实现：留观                                             |
| Hexo                   | - 快速、简洁且高效适合博客                                   | 4.9k/40k      | - https://hexo.iohttps://github.com/hexojs/hexo              | - [Hexo制作文档并发布到GitHub](https://cloud.tencent.com/developer/article/1460193?from_column=20421&from=20421)<br/>- 面向博客：pass |
| Docsify                | - 基于Vue/JavaScript<br/>- 偏向于文档<br/>- 不是一款静态网站生成器，只有一个index.html，打开网页时实时将Markdown文件解析为HTML，无需预先构建静态HTML<br/>- 对搜索引擎不太友好 | 5.7k/28.8k    | - https://docsify.js.org/https://github.com/docsifyjs/docsify | - 不是静态：pass                                             |
| Gitbook                | - 只对开源和非营利团队免费<br/>- 重点逐渐从开源工具转向商业产品 | -             | -                                                            | - [GitBook制作文档并发布到GitHub](https://cloud.tencent.com/developer/article/1460195?from_column=20421&from=20421)<br/>- 不免费：pass |
| dumi                   | - 为组件研发而生                                             | 1.2k/3.7k     | - https://d.umijs.org/https://github.com/umijs/dumi          | -                                                            |
| Gridsome               | - 基于Vue.js技术栈                                           | 485/8.6k      | - https://gridsome.org/https://github.com/gridsome/gridsome  | -                                                            |
| Eleventy               | -                                                            | -             | -                                                            | -                                                            |
| NuxtJS                 | -                                                            | -             | -                                                            | -                                                            |
| Slate                  | -                                                            | -             | -                                                            | -                                                            |

## SSG试用体验

### 评估维度

- 视觉效果上理不理想，PC端+移动端等的响应式设计
- 技术上能不能hold住，后面需要自己定制而不只是使用原始简单的demo
- 流程上好不好衔接，衔接现有CMS数据源、部署平台等

### 评估结论

- Docusaurus适合做企业级内容平台。典型用户：技术传播团队/开发者关系部门。
- VitePress适合做轻量技术文档/API手册/个人内容平台。典型用户：独立开发者/初创技术团队。
- MkDocs适合做内部知识库/标准化流程文档/商业化文档中心（不支持单页面应用）。典型用户：运维团队/技术写作者。
- Jekyll适合做个人技术博客/企业新闻中心，是GitHub的原生博客平台。典型用户：个人开发者/市场内容团队。
- Gatsby适合做企业级官网/数据驱动型营销页面，对接各种数据源，复杂数据可视化。典型用户：数字营销团队/全栈工程师。

### 体验维度

- Docusaurus：
  - 免费？MIT License，商用无限制，包括商业用途和代码修改。
  - 活跃度，背靠Meta React，企业级稳定性。
  - 有点入门门槛，需要一些前端框架的知识。
  - 效果炫酷一些，但是配置、打包等方面也会重一些。
  - 开箱即用的文档相关功能。支持版本管理，专注于成为撰写和发布内容的最佳工具。
  - 自带开发服务器上也能动态刷新。
  - 原生支持多版本管理、完善支持国际化、高自由度主题定制、丰富的插件生态、自动SEO优化、深度定制交互组件（如在线IDE嵌入）。
- VitePress：
  - 免费？MIT License，允许商用，需要保留原始版权声明。此外主题或插件可能采用不同协议（例如GPL），需要单独确认。
  - 活跃度，背靠社区。
  - 入门门槛低，大部分改改配置就行，且项目目录和构建思路清晰。
  - 构建过程、页面风格、使用指南等都比较简洁，基本在config.mts和md文件中就能完成所有配置操作。
  - 开箱即用的文档相关功能，但处于初期，[目前不支持版本管理](https://github.com/vuejs/vitepress/discussions/4037)？
  - 处于初期，一些插件、主题等自定义配置没有Docusaurus和VuePress丰富。
  - 插件支持多版本管理、基础支持国际化、中等自由度主题定制、起步的插件生态、基础SEO优化。
- MkDocs：如果你不需要单页应用，也不打算利用React的话，这是个好选择。
  - 免费？BSD License，允许商用，无需公开修改后的代码，需要保留原始版权声明。
  - 活跃度？背靠社区，[Material for MkDocs](https://wdk-docs.github.io/mkdocs-material-docs/setup/changing-the-logo-and-icons/)主题背靠Google Material Design设计规范。
  - 零入门门槛，无需前端框架的知识，对应的也没什么动态交互能力。
  - 什么是单页应用，就是文档中心主页吗？反正不支持。
  - 与Python生态天然融合，适合集成到CI/CD工作流程？
  - 动态刷新，例如改个网站图标什么的直接就出效果了，方便是方便，但从企业内容的角度看不够安全，少了手动触发构建和部署的环节，未经评审或者误修改的内容都可能直接刷新到线上。
  - 不支持多版本管理、不支持国际化、有限自由度主题定制、有限的插件生态、基础SEO优化。
- Jekyll：
  - 免费？MIT License，商用无限制。部分第三方主题可能使用非MIT协议，需要检查主题仓库。
  - 没有开箱即用的文档相关功能，只能通过主题实现，定制起来比较繁琐，或存在原作者停止维护的风险。
  - 动态刷新，例如修改个文档什么的自动就显示最新的了，方便是方便，但从企业内容的角度看不够安全，少了手动触发构建和部署的环节，未经评审或者误修改的内容都可能直接刷新到线上。
  - 不支持多版本管理、插件支持国际化、中等自由度主题定制、成熟的插件生态、基础SEO优化。
- Gatsby：
  - 免费？MIT License，核心框架可商用，部分插件（例如Gatsby Cloud等）需单独确认。
  - 不支持多版本管理、插件支持国际化、极高自由度主题定制、最丰富的插件生态、高级SEO优化、数据分析，另外在数据源扩展方面非常强大，可以对接各种CMS/API。
