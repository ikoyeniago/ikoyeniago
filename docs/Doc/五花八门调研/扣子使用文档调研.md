---
sidebar_position: 2
sidebar_label: 扣子使用文档调研
sidebar_class_name: green
---

## 背景

最近出于项目需要调研了下扣子的使用文档架构，从阅读文档时的一些疑问出发，梳理出产品的使用逻辑，总结出一些阅读过程中体验到的问题，最终输出了一份优化后的参考架构。

> 说明：文中提到的问题和优化，仅代表个人看法。贴出来是为了抛砖引玉，供大家参考和讨论。如有任何意见，欢迎交流，联系方式请见*首页页脚 > More > 有意来聊*。

扣子的使用文档面向下面几个产品，简单说下个人理解的产品定位：

* [扣子平台](https://www.coze.cn/open/docs/guides)：开发平台，可视化页面、API调用等方式开发智能体、AI应用、工作流等，并配套模型管理、资源管理、组织管理等功能。

* [扣子空间](https://www.coze.cn/open/docs/cozespace/overview)：基于扣子的多智能体体验环境。

* [扣子罗盘](https://www.coze.cn/open/docs/cozeloop/what-is-cozeloop)：基于扣子的智能体开发调优运维平台。

## 架构分析

### 一些疑问

从架构不太能看出来组件之间的关系，需要细读一些文档，自己梳理下使用逻辑。

1. 智能体和扣子应用有什么区别？
     * 智能体是对话式的，扣子应用是包含定制用户界面的，可以包含应用专属的资源。

2. 工作流和智能体、扣子应用有什么关系？
     * 智能体和扣子应用调用工作流处理逻辑复杂、稳定性要求高的任务。


3. 插件（拓展能力边界）、知识库（添加个人知识）、提示词、数据库（存储重要对话参数和内容）、音色这些资源如何融入到智能体和扣子应用的？
     * 通过空间组织资源，空间内可以创建智能体、扣子应用和共享资源库，扣子应用可以创建专属资源库。


4. 项目发布为什么单独拎出来？
     * 貌似没什么理由，单纯的没怎么设计吧...


5. 开发指南中把智能音视频列出来的逻辑是什么？
     * 貌似没什么理由，单纯的没怎么设计吧...


### 一些问题

1. 当前的架构没有清晰的主线，既不完全基于操作流程，也不完全基于功能模块，不同产品间也没有相对一致的架构逻辑。

   * 比如快速开始这里，就涉及了智能体or应用（产品维度），UI引导or自然语言（交互维度），空白or模板（复用维度）等维度的信息，但是并没有做清晰的分类和排序。

     ![](\doc_img\image-6.png)

   * 比如开发智能体这里，添加技能、知识等其实是智能体搭建流程的一部分，是基于资源库实现的，在架构上却给人是不同流程的既视感。

     ![](\doc_img\image-3.png)

   * 比如智能体、扣子应用、工作流，同样是concept、task，标题用词就千差万别。

     ![](\doc_img\image-5.png)

2. 目前的架构没有做到task-based，也没有做到minimalism ，操作类和参考类的内容混在一起。

   * 这里的几个为智能体添加xxx，就比较生硬，task-based应该匹配使用逻辑，这几个topic都是从属于智能体创建流程的，把几个UI选项用task的形式写，对用户来说并不是真正的task-based。难道我还要为了调一个UI选项，在界面上把创建流程重复来重复去，或者对着一个界面找半天文档吗？肯定是希望对着一篇文档，就能把主体的选项都搞定。

     ![](\doc_img\image-4.png)

   * 主要原因还是设计时囿于功能模块，仅仅套用concept、task这些类型去分割初始的材料，而没能从用户角度消化和转译，没能面向整个产品做架构设计和迭代。目前的文档维护逻辑应该是根据功能模块新建topic、根据功能模块定位置，但同时又难以在架构中体现使用逻辑，所以就出了一些快速xxx类的topic。这样做的明显表现包括：

     * 对于智能体单Agent、多Agents模式导致界面大变样的要素，仍然只是作为一个功能模块去写，无法在更高的层级让读者明确感知到这种重要的分岔路口。

     * concept、task、reference混在同一个层级，没有把节点归在同一个目录下，估计是因为怕文档层级太深，而这种深恰恰又是没有面向整个产品做架构设计的结果，reference类的内容就没必要放在和它对应的功能使用目录下面，完全可以在一级目录下单开一个目录，就像API参考一样。这样还能有一个显眼的位置，总体介绍各个节点之间的逻辑关系和设计思路。

       ![](\doc_img\image.png)
     

3. 某些手册的定位有问题，比如开发指南，算是零散列了个别场景（智能音视频）、个别节点的定制能力（渠道入驻 回调管理 会话与消息），但没有对扣子平台提供的开发能力做整体介绍，比如一个思路是通过API、SDK透出开发能力，在开发时中有什么典型编程模型可以套用，针对哪些场景、哪些环节有那些典型的编程操作可以借鉴。另外，扣子平台本身就是一个开发平台，把一些直接在页面上配置的选项单独当做开发指南的一个架构维度有点没必要，API调用folder放在API参考反而更合适吧？渠道入驻放在管理发布渠道反而更合适吧？

### 优化思路

1. 定价、购买、订阅套餐、推广、变现之类的功能，项目不涉及，分析文档时直接跳过。

2. 介绍使用时还是要基于典型流程。
   - 梳理出流程中影响操作的关键变量，例如智能体单Agent、多Agents的操作界面差别比较大，就可以作为分篇的依据。
   - 不要混淆流程节点和配置化功能，比如发布在操作上是智能体和应用开发的一个环节，但是可以在空间配置中管理发布渠道，就不用把发布这个节点单拎出来，流程是流程，配置是配置。



3. 创建智能体和AI应用的过程中，会有较多的配置，不适合全部在一篇展开，需要提取共通的参考类信息，以功能模块的形式列举，做好顺序设计和链接引用，方便查阅。

4. 有扣子平台、扣子空间、扣子罗盘这样的产品，扣子平台也有个人免费版、个人进阶版、团队版、企业版，可能需要在不同位置嵌入文档入口，在文档架构中也要考虑对不同版本的兼容性，要能相对独立。

5. 为目前的每篇文档找到更合理的位置，要重视concept类文档的质量，写concept时注意：

     * 选择合适的粒度，避免过大（讲的太抽象实用性低）或过细（难以体现多组件之间的逻辑）。
     * 尽量在相同的层级保持一致的描述粒度。
     * 搞清趋势、需求、技术原理、产品功能、方案、特点、优势等类型内容的用途，避免混杂在一起。


## 架构Before

![](\doc_img\diagram.png)

## 架构After

![](\doc_img\diagram-1.png)
